<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title th:text="${actor.className}"></title>
<link rel="icon" type="image/x-icon" href="/img/icon.shooter.ico"/>
<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<script type="text/javascript" src="/js/ssfw-min.js"></script>
<script type="text/javascript" src="/js/editActor-min.js"></script>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}
#view {
	position: relative;
	overflow: auto;
	z-index: 0;
	transform-origin: 0px 0px;
	color: white;
	background-color: lightgray;
	/*border: 1px blue dotted;*/
	-moz-user-select: none;
	-webkit-user-select: none;
  -ms-user-select: none;
  text-align: center;
}
input[type=number] {
  text-align: right;
}
</style>
</head>

<body th:object="${actor}">
  <div data-role="page">
    <div id="view">
      <canvas id="canvas"></canvas>
      <div id="loading"></div>
    </div>
    <div data-role="footer" data-position="fixed">
      <div>
        <fieldset data-role="controlgroup" data-type="horizontal">
          <a href="#attrPanel" class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-info">Attributes</a>
          <a href="#imagePanel" class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-eye">Images</a>
          <a href="#eventPanel" class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-bullets">Event</a>
          <a href="#behaviorPage" class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-bars">Behavior</a>
          <button disabled="disabled" data-theme="b">Scale</button>
          <select name="scale">
            <option value="1">1</option>
            <option value="2" selected="selected">2</option>
            <option value="4">4</option>
            <option value="8">8</option>
            <option value="16">16</option>
          </select>
        </fieldset>
        <button id="saveButton" type="button" class="ui-btn-right ui-btn ui-btn-b ui-btn-inline ui-mini ui-corner-all ui-btn-icon-left ui-icon-check" th:text="#{button.save}">Save</button>
        <input type="hidden" th:field="*{id}"/>
        <input type="hidden" name="productId" th:value="*{product.id}"/>
        <input type="hidden" name="mediasetId" th:value="*{product.mediaset.id}"/>
        <input type="hidden" th:name="${_csrf.headerName}" th:value="${_csrf.token}"/>
      </div>
    </div>
    <div id="attrPanel" data-role="panel" data-position="left" data-display="overlay">
      <input type="text" th:field="*{className}"/>
      <div data-role="collapsibleset" data-mini="true">
        <div data-role="collapsible" data-collapsed="false">
          <h4 th:text="#{basic}">Basic</h4>
          <fieldset class="ui-grid-a">
            <div class="ui-block-a">
              <label>Width:<input type="number" required="required" th:field="*{width}"/></label>
            </div>
            <div class="ui-block-b">
              <label>Height:<input type="number" required="required" th:field="*{height}"/></label>
            </div>
          </fieldset>
          <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true"
              th:with="typeList=${T(to.kit.shooter.entity.type.RegionType).List}">
            <legend>RegionType:</legend>
            <label th:each="type:${typeList}"><span th:text="${type}"></span>
              <input type="radio" th:field="*{regionType}" th:value="${type}" th:attr="data-value=${type.ix}"/>
            </label>
          </fieldset>
          <label><span>RegionSize:</span>
            <input type="number" required="required" th:field="*{regionSize}"/>
          </label>
          <fieldset class="ui-grid-a">
            <div class="ui-block-a">
              <label>Hitpoint:<input type="number" required="required" th:field="*{hitpoint}"/></label>
            </div>
            <div class="ui-block-b">
              <label>Score:<input type="number" required="required" th:field="*{score}"/></label>
            </div>
          </fieldset>
        </div>
        <div data-role="collapsible">
          <h4 th:text="#{movement}">Movement</h4>
          <label><span>Speed:</span>
            <input type="number" step="0.1" min="-10" max="10" required="required" th:field="*{speed}" class="numeric"/>
          </label>
          <fieldset data-role="controlgroup" data-mini="true">
            <legend>DirType:</legend>
            <select th:field="*{dirType}" th:with="dirTypes=${T(to.kit.shooter.entity.type.DirType).List}">
              <option th:each="type:${dirTypes}" th:value="${type}" th:attr="data-value=${type.ix}" th:text="${type}"></option>
            </select>
          </fieldset>
          <label><span>DirSpeed:</span>
            <input type="number" required="required" th:field="*{dirSpeed}"/>
          </label>
        </div>
      </div>
    </div>
    <div id="imagePanel" data-role="panel" data-position="left" data-display="overlay">
      <div class="ui-bar ui-bar-b ui-corner-all">Images</div>
      <ul data-role="listview" data-split-icon="minus" data-split-theme="a" data-inset="true">
        <li th:each="actorVisual:*{actorVisualList}" th:object="${actorVisual}"
            th:attr="data-index=*{seq}, data-visualSeq=*{visualSeq}" class="sortable-item">
          <a href="#actorVisualPopup" data-rel="popup" data-position-to="window">
  <!--
            <img src="/img/icon.listview.png"/>
            <span class="ui-li-count" th:text="${actorVisual.seq}"></span>
  -->
            <span th:text="*{name}"></span>
            <p th:text="*{visualSeq}"></p>
          </a>
          <a href="#" class="sortable"></a>
        </li>
      </ul>
      <button class="ui-btn ui-corner-all ui-btn-icon-left ui-icon-plus imageSelector">Add image</button>
    </div>
    <div id="eventPanel" data-role="panel" data-position="left" data-display="overlay">
      <div class="ui-bar ui-bar-b ui-corner-all">Event</div>
      <div data-role="collapsibleset" data-mini="true">
        <div data-role="collapsible">
          <h4 th:text="#{enter}">Enter</h4>
        </div>
        <div data-role="collapsible">
          <h4 th:text="#{react}">React</h4>
        </div>
        <div data-role="collapsible">
          <h4 th:text="#{explosion}">Explosion</h4>
        </div>
      </div>
    </div>
    <div id="actorVisualPopup" data-role="popup" data-theme="a" data-overlay-theme="b" class="ui-corner-all ui-content">
      <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
      <div class="ui-bar ui-bar-b ui-corner-all">Visual</div>
      <div>
        <fieldset data-role="controlgroup" data-mini="true">
          <legend>DirType:</legend>
          <select name="dirType" th:with="dirTypes=${T(to.kit.shooter.entity.type.DirType).VisualList}">
            <option th:each="type:${dirTypes}" th:value="${type.ix}" th:text="${type}"></option>
          </select>
        </fieldset>
        <label><span>DirSpeed:</span>
          <input type="number" name="dirSpeed" required="required"/>
        </label>
<!--
        <label>repeat:
          <input type="text" name="repeat"/>
        </label>
        <label>radian:
          <input type="text" name="radian"/>
        </label>
        <label>speed:
          <input type="text" name="speed"/>
        </label>
        <label>blink:
          <input type="text" name="blink"/>
        </label>
-->
      </div>
    </div>
    <div th:replace="_imageSelector"></div>
    <div id="actorPanel" data-role="panel" data-position="right" data-display="overlay">
      <div data-role="controlgroup" data-filter="true"></div>
    </div>
    <div id="messagePopup" data-role="popup" data-overlay-theme="b" class="ui-content" style="max-width:280px">
      <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
      <p></p>
    </div>
  </div>
  <div id="behaviorPage" data-role="page">
    <div data-role="header">
      <h2>Behavior - <span th:text="${actor.className}"></span></h2>
      <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-notext ui-btn-left ui-icon-back">Back</a>
    </div>
    <textarea th:field="*{behavior}"></textarea>
  </div>
</body>
</html>
